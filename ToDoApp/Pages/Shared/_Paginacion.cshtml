@model PaginacionInfo

<div class="d-flex justify-content-between align-items-center mt-3 mb-4">
    <div class="d-flex align-items-center">
        <span class="me-2">Mostrar</span>
        <form id="paginationForm" class="d-flex align-items-center" method="get" action="">
            <input type="number" id="tareasPorPagina" name="TareasPorPagina"
                   class="form-control form-control-sm" style="width: 70px;"
                   value="@Model.TareasPorPagina" min="1" max="100" />
            <input type="hidden" name="PaginaActual" value="1" />
            <button type="submit" class="btn btn-sm btn-primary ms-2">Aplicar</button>
        </form>
        <span class="ms-2">tareas por página</span>
    </div>

    <div class="d-flex">
        <small class="text-muted me-3">
            Mostrando @(Model.IndiceInicial + 1) a @Math.Min(Model.IndiceInicial + Model.TareasPorPagina, Model.TotalTareas) de @Model.TotalTareas tareas
        </small>

        <nav aria-label="Navegación de páginas">
            <ul class="pagination pagination-sm mb-0">
                <li class="page-item @(Model.TienePaginaAnterior ? "" : "disabled")">
                    <a class="page-link" href="?PaginaActual=1&TareasPorPagina=@Model.TareasPorPagina" aria-label="Primera">
                        <span aria-hidden="true">&laquo;&laquo;</span>
                    </a>
                </li>
                <li class="page-item @(Model.TienePaginaAnterior ? "" : "disabled")">
                    <a class="page-link" href="?PaginaActual=@Model.PaginaAnterior&TareasPorPagina=@Model.TareasPorPagina" aria-label="Anterior">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>

                @{
                    int paginaInicial = Math.Max(1, Model.PaginaActual - 2);
                    int paginaFinal = Math.Min(Model.TotalPaginas, paginaInicial + 4);

                    if (paginaFinal - paginaInicial < 4 && Model.TotalPaginas > 4)
                    {
                        paginaInicial = Math.Max(1, paginaFinal - 4);
                    }
                }

                @for (int i = paginaInicial; i <= paginaFinal; i++)
                {
                    <li class="page-item @(i == Model.PaginaActual ? "active" : "")">
                        <a class="page-link" href="?PaginaActual=@i&TareasPorPagina=@Model.TareasPorPagina">@i</a>
                    </li>
                }

                <li class="page-item @(Model.TienePaginaSiguiente ? "" : "disabled")">
                    <a class="page-link" href="?PaginaActual=@Model.PaginaSiguiente&TareasPorPagina=@Model.TareasPorPagina" aria-label="Siguiente">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
                <li class="page-item @(Model.TienePaginaSiguiente ? "" : "disabled")">
                    <a class="page-link" href="?PaginaActual=@Model.TotalPaginas&TareasPorPagina=@Model.TareasPorPagina" aria-label="Última">
                        <span aria-hidden="true">&raquo;&raquo;</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>
</div>